import{u as C,r,j as e,B as m,L as c,g as w,A as y,n as A,o as k,q as T,m as U,t as F}from"./index-CYuDxeVZ.js";import{I as L}from"./input-DzyvJJh-.js";import{S as E,a as _,b as I,c as R,d}from"./select-BERQyZpp.js";import{S as B,F as V,T as D,a as H,b as j,c as t,d as P,e as l}from"./table-gIOeb17S.js";import{C as $,a as q,b as z,c as G,d as J}from"./card-B2R_5Mvu.js";import{P as K}from"./plus-adGqTkVZ.js";const Z=()=>{const{user:o}=C(),[u,b]=r.useState([]),[f,g]=r.useState([]),[N,x]=r.useState(!0),[i,v]=r.useState(""),[n,S]=r.useState(""),h=(o==null?void 0:o.role)==="admin";return r.useEffect(()=>{h?(async()=>{try{x(!0);const a=await F.getUsers();b(a.data.data.users),g(a.data.data.users)}catch(a){console.error("Error fetching users:",a)}finally{x(!1)}})():x(!1)},[h]),r.useEffect(()=>{let s=[...u];if(i){const a=i.toLowerCase();s=s.filter(p=>p.full_name.toLowerCase().includes(a)||p.email.toLowerCase().includes(a))}n&&(s=s.filter(a=>a.role===n)),g(s)},[i,n,u]),h?N?e.jsx(w,{fullScreen:!1}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Usuarios"}),e.jsx(m,{asChild:!0,children:e.jsxs(c,{to:"/users/create",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Nuevo Usuario"]})})]}),e.jsxs($,{children:[e.jsxs(q,{children:[e.jsx(z,{children:"Lista de Usuarios"}),e.jsx(G,{children:"Gestiona los usuarios del sistema"})]}),e.jsxs(J,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(L,{type:"search",placeholder:"Buscar por nombre o email...",className:"pl-8",value:i,onChange:s=>v(s.target.value)})]}),e.jsx("div",{className:"w-full md:w-[200px]",children:e.jsxs(E,{value:n,onValueChange:S,children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),e.jsx(I,{placeholder:"Filtrar por rol"})]})}),e.jsxs(R,{children:[e.jsx(d,{value:"all",children:"Todos los roles"}),e.jsx(d,{value:"admin",children:"Administrador"}),e.jsx(d,{value:"analyst",children:"Analista"}),e.jsx(d,{value:"stakeholder",children:"Stakeholder"})]})]})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(D,{children:[e.jsx(H,{children:e.jsxs(j,{children:[e.jsx(t,{children:"Usuario"}),e.jsx(t,{children:"Email"}),e.jsx(t,{children:"Rol"}),e.jsx(t,{children:"Fecha Creación"}),e.jsx(t,{className:"text-right",children:"Acciones"})]})}),e.jsx(P,{children:f.length>0?f.map(s=>e.jsxs(j,{children:[e.jsx(l,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(y,{className:"h-8 w-8 mr-2",children:[e.jsx(A,{src:"/placeholder.svg",alt:s.full_name}),e.jsx(k,{children:T(s.full_name)})]}),e.jsx(c,{to:`/users/${s.id}`,className:"hover:underline text-primary",children:s.full_name})]})}),e.jsx(l,{children:s.email}),e.jsx(l,{children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${s.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":s.role==="analyst"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:s.role==="admin"?"Administrador":s.role==="analyst"?"Analista":"Stakeholder"})}),e.jsx(l,{children:s.created_at?U(s.created_at):"N/A"}),e.jsx(l,{className:"text-right",children:e.jsx(m,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(c,{to:`/users/${s.id}`,children:"Ver detalles"})})})]},s.id)):e.jsx(j,{children:e.jsx(l,{colSpan:5,className:"h-24 text-center",children:"No se encontraron usuarios"})})})]})})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Acceso Restringido"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No tienes permisos para acceder a esta sección."}),e.jsx(m,{asChild:!0,children:e.jsx(c,{to:"/dashboard",children:"Volver al Dashboard"})})]})};export{Z as default};
