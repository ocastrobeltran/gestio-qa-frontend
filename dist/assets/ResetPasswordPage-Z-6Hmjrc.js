import{r as s,d as T,e as V,b as I,j as e,B as n,L as i,C as D,c as q}from"./index-CROi_bFZ.js";import{I as p}from"./input-BF63-rU5.js";import{L as f}from"./label-kHtJxQ_W.js";import{C as g,a as b,b as v,c as N,d as w,e as y}from"./card-B-0H7GP8.js";import{A as C}from"./arrow-left-BPDy95mI.js";const z=()=>{const[r,S]=s.useState(""),[l,L]=s.useState(""),[o,d]=s.useState(!1),[E,P]=s.useState(!1),[m,t]=s.useState(""),[k,F]=s.useState(!0),{token:c}=T(),B=V(),{toast:x}=I();s.useEffect(()=>{(!c||c.length<10)&&F(!1)},[c]);const R=async a=>{var u,h;if(a.preventDefault(),t(""),r!==l){t("Las contraseñas no coinciden");return}if(r.length<8){t("La contraseña debe tener al menos 8 caracteres");return}d(!0);try{await q.resetPassword(c,r),P(!0),x({title:"Contraseña restablecida",description:"Tu contraseña ha sido restablecida correctamente."}),setTimeout(()=>{B("/login")},3e3)}catch(j){console.error("Error:",j),t(((h=(u=j.response)==null?void 0:u.data)==null?void 0:h.message)||"Error al restablecer la contraseña"),x({variant:"destructive",title:"Error",description:"No se pudo restablecer la contraseña. El enlace puede haber expirado."})}finally{d(!1)}};return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("img",{src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/leggerLogo1-removebg-preview-MfZddPFvj1or6BF1V7jDr5EB2aJv3R.png",alt:"Legger Logo",className:"h-12"})}),e.jsxs(g,{children:[e.jsxs(b,{className:"space-y-1",children:[e.jsx(v,{className:"text-2xl font-bold text-center",children:"Restablecer Contraseña"}),e.jsx(N,{className:"text-center",children:"Crea una nueva contraseña para tu cuenta"})]}),e.jsx(w,{children:E?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"bg-primary/10 text-primary p-4 rounded-md flex items-center",children:[e.jsx(D,{className:"h-5 w-5 mr-2"}),e.jsx("p",{children:"Tu contraseña ha sido restablecida correctamente."})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Serás redirigido al inicio de sesión en unos segundos..."}),e.jsx(n,{asChild:!0,className:"mt-2",children:e.jsx(i,{to:"/login",children:"Ir al inicio de sesión"})})]}):e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"password",children:"Nueva contraseña"}),e.jsx(p,{id:"password",type:"password",placeholder:"••••••••",value:r,onChange:a=>S(a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"confirmPassword",children:"Confirmar contraseña"}),e.jsx(p,{id:"confirmPassword",type:"password",placeholder:"••••••••",value:l,onChange:a=>L(a.target.value),required:!0})]}),m&&e.jsx("div",{className:"text-sm text-destructive",children:m}),e.jsx(n,{type:"submit",className:"w-full",disabled:o,children:o?"Procesando...":"Restablecer contraseña"})]})}),e.jsx(y,{className:"flex justify-center",children:e.jsxs(i,{to:"/login",className:"text-sm text-primary hover:underline flex items-center",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Volver al inicio de sesión"]})})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("img",{src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/leggerLogo1-removebg-preview-MfZddPFvj1or6BF1V7jDr5EB2aJv3R.png",alt:"Legger Logo",className:"h-12"})}),e.jsxs(g,{children:[e.jsxs(b,{className:"space-y-1",children:[e.jsx(v,{className:"text-2xl font-bold text-center",children:"Enlace inválido"}),e.jsx(N,{className:"text-center",children:"El enlace para restablecer la contraseña es inválido o ha expirado."})]}),e.jsx(w,{className:"text-center",children:e.jsx(n,{asChild:!0,className:"mt-4",children:e.jsx(i,{to:"/forgot-password",children:"Solicitar nuevo enlace"})})}),e.jsx(y,{className:"flex justify-center",children:e.jsxs(i,{to:"/login",className:"text-sm text-primary hover:underline flex items-center",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Volver al inicio de sesión"]})})]})]})})};export{z as default};
